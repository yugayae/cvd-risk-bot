# –û—Ç—á—ë—Ç: –ê–Ω–∞–ª–∏–∑ –∫–ª–∏–Ω–∏—á–µ—Å–∫–∏—Ö –ø–∞—Ä–∞–¥–æ–∫—Å–æ–≤ –∏ –∑–∞—â–∏—Ç–Ω–æ–π –ª–æ–≥–∏–∫–∏ ML-–º–æ–¥–µ–ª–∏

## 1. –†–µ–∑—é–º–µ –∏—Å–ø—ã—Ç–∞–Ω–∏–π
–ü—Ä–æ–≤–µ–¥–µ–Ω–æ —Å—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ CatBoost –Ω–∞ —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏—Ö ¬´–ø–∞—Ü–∏–µ–Ω—Ç–∞—Ö-–±–ª–∏–∑–Ω–µ—Ü–∞—Ö¬ª –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –∫–ª–∏–Ω–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–π, –≤—ã–∑–≤–∞–Ω–Ω—ã—Ö –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—è–º–∏ –æ–±—É—á–∞—é—â–µ–≥–æ –¥–∞—Ç–∞—Å–µ—Ç–∞.

> [!WARNING]
> **–û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø–∞—Ä–∞–¥–æ–∫—Å—ã –≤ ¬´—Å—ã—Ä–æ–π¬ª –º–æ–¥–µ–ª–∏**: –§–∞–∫—Ç–æ—Ä—ã **–ö—É—Ä–µ–Ω–∏–µ** –∏ **–ê–ª–∫–æ–≥–æ–ª—å** –≤ –º–æ–¥–µ–ª–∏ CatBoost *—Å–Ω–∏–∂–∞—é—Ç* –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–Ω—ã–π —Ä–∏—Å–∫ –¥–ª—è –∏–¥–µ–Ω—Ç–∏—á–Ω–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è –ø–∞—Ü–∏–µ–Ω—Ç–∞, —á—Ç–æ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—Ç –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–π –Ω–∞—É–∫–µ.

---

## 2. –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞: –°—ã—Ä–æ–π ML vs. –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è –õ–æ–≥–∏–∫–∞

–ò—Å–ø—ã—Ç–∞–Ω–∏–µ –Ω–∞ –±–∞–∑–æ–≤–æ–º –ø–∞—Ü–∏–µ–Ω—Ç–µ: –ú—É–∂—á–∏–Ω–∞, 45 –ª–µ—Ç, –ò–ú–¢ 22.8, –ê–î 120/80.

| –§–∞–∫—Ç–æ—Ä —Ä–∏—Å–∫–∞ | –í–ª–∏—è–Ω–∏–µ –≤ —Å—ã—Ä–æ–º ML (Œî —Ä–∏—Å–∫) | –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π —Ñ–∞–∫—Ç | –°—Ç–∞—Ç—É—Å –ø–∞—Ä–∞–¥–æ–∫—Å–∞ | –ó–∞—â–∏—Ç–∞ –≤ —Å–∏—Å—Ç–µ–º–µ |
|---|---|---|---|---|
| **–ö—É—Ä–µ–Ω–∏–µ** | **‚àí3.4%** (–°–Ω–∏–∂–∞–µ—Ç) | –ü–æ–≤—ã—à–∞–µ—Ç —Ä–∏—Å–∫ (RR 2-4x) | üî¥ **–ü–∞—Ä–∞–¥–æ–∫—Å** | [–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ] Clinical Correction Layer |
| **–ê–ª–∫–æ–≥–æ–ª—å** | **‚àí4.3%** (–°–Ω–∏–∂–∞–µ—Ç) | –ü–æ–≤—ã—à–∞–µ—Ç —Ä–∏—Å–∫ | üî¥ **–ü–∞—Ä–∞–¥–æ–∫—Å** | [–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ] Clinical Correction Layer |
| **–•–æ–ª–µ—Å—Ç–µ—Ä–∏–Ω ‚Üë**| **+47.4%** (–ü–æ–≤—ã—à–∞–µ—Ç) | –ü–æ–≤—ã—à–∞–µ—Ç —Ä–∏—Å–∫ | ‚úÖ –û–∂–∏–¥–∞–µ–º–æ | –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –ø—Ä–∞–≤–æ–∫ |
| **–ê–î –°–∏—Å—Ç. ‚Üë** | **+63.4%** (–ü–æ–≤—ã—à–∞–µ—Ç) | –ü–æ–≤—ã—à–∞–µ—Ç —Ä–∏—Å–∫ | ‚úÖ –û–∂–∏–¥–∞–µ–º–æ | –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –ø—Ä–∞–≤–æ–∫ |
| **–ì–∏–ø–æ–¥–∏–Ω–∞–º–∏—è** | **+4.4%** (–ü–æ–≤—ã—à–∞–µ—Ç) | –ü–æ–≤—ã—à–∞–µ—Ç —Ä–∏—Å–∫ | ‚úÖ –û–∂–∏–¥–∞–µ–º–æ | –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –ø—Ä–∞–≤–æ–∫ |
| **–ì–ª—é–∫–æ–∑–∞ ‚Üë** | **+2.9%** (–ü–æ–≤—ã—à–∞–µ—Ç) | –ü–æ–≤—ã—à–∞–µ—Ç —Ä–∏—Å–∫ | ‚úÖ –û–∂–∏–¥–∞–µ–º–æ | –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –ø—Ä–∞–≤–æ–∫ |

---

## 3. –ê–Ω–∞–ª–∏–∑ –ø—Ä–∏—á–∏–Ω –ø–∞—Ä–∞–¥–æ–∫—Å–æ–≤ (ML Bias)

### 3.1. –ü–æ—á–µ–º—É –º–æ–¥–µ–ª—å ¬´–æ—à–∏–±–∞–µ—Ç—Å—è¬ª?
–í –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö –¥–∞—Ç–∞—Å–µ—Ç–∞—Ö (–æ—Å–æ–±–µ–Ω–Ω–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–ø—Ä–æ—Å–æ–≤, –∫–∞–∫ Kaggle Cardio) —á–∞—Å—Ç–æ –≤–æ–∑–Ω–∏–∫–∞—é—Ç **—Å–∫—Ä—ã—Ç—ã–µ –∫–æ—Ñ–∞–∫—Ç–æ—Ä—ã**:
1. **Smoker's Paradox**: –ö—É—Ä–∏–ª—å—â–∏–∫–∏ –≤ –≤—ã–±–æ—Ä–∫–µ –º–æ–≥—É—Ç –±—ã—Ç—å –≤ —Å—Ä–µ–¥–Ω–µ–º –º–æ–ª–æ–∂–µ –∏–ª–∏ –∏–º–µ—Ç—å –º–µ–Ω—å—à–∏–π –≤–µ—Å, —á—Ç–æ –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç –º–æ–¥–µ–ª—å —Å–≤—è–∑—ã–≤–∞—Ç—å –∫—É—Ä–µ–Ω–∏–µ —Å ¬´–∑–∞—â–∏—Ç–Ω—ã–º¬ª —ç—Ñ—Ñ–µ–∫—Ç–æ–º –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–π –≥–ª—É–±–∏–Ω–µ –¥–µ—Ä–µ–≤–∞ –∏–ª–∏ –Ω–µ—Ö–≤–∞—Ç–∫–µ –¥–∞–Ω–Ω—ã—Ö.
2. **Healthy Drinker Effect**: –õ—é–¥–∏, —É–ø–æ—Ç—Ä–µ–±–ª—è—é—â–∏–µ –∞–ª–∫–æ–≥–æ–ª—å –≤ —É–º–µ—Ä–µ–Ω–Ω—ã—Ö –¥–æ–∑–∞—Ö, —á–∞—Å—Ç–æ –∏–º–µ—é—Ç –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏–π —Å–æ—Ü–∏–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å –∏ –¥–æ—Å—Ç—É–ø –∫ –º–µ–¥–∏—Ü–∏–Ω–µ, —á–µ–º –ø–æ–ª–Ω—ã–µ –∞–±—Å—Ç–∏–Ω–µ–Ω—Ç—ã (–∫–æ—Ç–æ—Ä—ã–µ —á–∞—Å—Ç–æ –±—Ä–æ—Å–∏–ª–∏ –ø–∏—Ç—å –∏–∑-–∑–∞ —É–∂–µ –∏–º–µ—é—â–∏—Ö—Å—è –±–æ–ª–µ–∑–Ω–µ–π). –ú–æ–¥–µ–ª—å –≤–∏–¥–∏—Ç –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—é ¬´–∞–ª–∫–æ–≥–æ–ª—å = –º–µ–Ω—å—à–µ –±–æ–ª–µ–∑–Ω–µ–π¬ª.

### 3.2. –ü–æ—á–µ–º—É —ç—Ç–æ –û–ü–ê–°–ù–û –≤ –º–µ–¥–∏—Ü–∏–Ω–µ?
–ï—Å–ª–∏ –≤—Ä–∞—á –≤–∏–¥–∏—Ç, —á—Ç–æ —É –∫—É—Ä—è—â–µ–≥–æ –ø–∞—Ü–∏–µ–Ω—Ç–∞ —Ä–∏—Å–∫ –Ω–∏–∂–µ, —á–µ–º —É –Ω–µ–∫—É—Ä—è—â–µ–≥–æ, —ç—Ç–æ –ø–æ–¥—Ä—ã–≤–∞–µ—Ç –¥–æ–≤–µ—Ä–∏–µ –∫ —Å–∏—Å—Ç–µ–º–µ –∏ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –æ—à–∏–±–æ—á–Ω—ã–º –≤—Ä–∞—á–µ–±–Ω—ã–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º.

---

## 4. –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ó–∞—â–∏—Ç–Ω—ã–π –°–ª–æ–π (Clinical Correction)

–ù–∞—à–∞ —Å–∏—Å—Ç–µ–º–∞ –ù–ï –≤—ã–¥–∞—ë—Ç —Å—ã—Ä—ã–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è SHAP –Ω–∞–ø—Ä—è–º—É—é. –í —Ñ–∞–π–ª–µ [shap_interpreter.py](file:///c:/HomeWork/Medical/CVD_risk_Cat_Boost/cvd-risk-api/app/shap_interpreter.py) —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ **Clinical Ground Truth**.

### –ü—Ä–∏–º–µ—Ä –ª–æ–≥–∏–∫–∏ –¥–ª—è –ö—É—Ä–µ–Ω–∏—è:
```python
# –ï—Å–ª–∏ –≤ –¥–∞–Ω–Ω—ã—Ö smoke=1, –º—ã –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Å—Ç–∞–≤–∏–º 'increases risk' 
# –¥–∞–∂–µ –µ—Å–ª–∏ SHAP –º–æ–¥–µ–ª–∏ –≥–æ–≤–æ—Ä–∏—Ç 'reduces'
if feature == "smoke" and val == 1:
    is_pathological = True
    direction_key = "increases"
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏:
| –§–∞–∫—Ç–æ—Ä | –°—ã—Ä–æ–µ SHAP (ML) | –ö–ª–∏–Ω–∏—á–µ—Å–∫–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –≤ API | –°—Ç–∞—Ç—É—Å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
|---|---|---|---|
| –ö—É—Ä–µ–Ω–∏–µ | –°–Ω–∏–∂–∞–µ—Ç —Ä–∏—Å–∫ | **–ü–æ–≤—ã—à–∞–µ—Ç —Ä–∏—Å–∫** | ‚úÖ –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏ –≤–µ—Ä–Ω–æ |
| –ê–ª–∫–æ–≥–æ–ª—å | –°–Ω–∏–∂–∞–µ—Ç —Ä–∏—Å–∫ | **–ü–æ–≤—ã—à–∞–µ—Ç —Ä–∏—Å–∫** | ‚úÖ –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏ –≤–µ—Ä–Ω–æ |

---

## 5. –í—ã–≤–æ–¥—ã –∞—É–¥–∏—Ç–∞
1. **ML-–º–æ–¥–µ–ª—å –∏–º–µ–µ—Ç –Ω–µ—É—Å—Ç—Ä–∞–Ω–∏–º—ã–µ —Å–º–µ—â–µ–Ω–∏—è (biases)**, —Ö–∞—Ä–∞–∫—Ç–µ—Ä–Ω—ã–µ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –¥–∞—Ç–∞—Å–µ—Ç–∞.
2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ¬´—Å—ã—Ä—ã—Ö¬ª –æ–±—ä—è—Å–Ω–µ–Ω–∏–π (SHAP) –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º–æ** –≤ –∫–ª–∏–Ω–∏—á–µ—Å–∫–æ–π –ø—Ä–∞–∫—Ç–∏–∫–µ –¥–ª—è —Ñ–∞–∫—Ç–æ—Ä–æ–≤ –ö—É—Ä–µ–Ω–∏–µ –∏ –ê–ª–∫–æ–≥–æ–ª—å.
3. **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Å–ª–æ–π Clinical Correction —É—Å–ø–µ—à–Ω–æ –∫—É–ø–∏—Ä—É–µ—Ç —ç—Ç–∏ –ø–∞—Ä–∞–¥–æ–∫—Å—ã**, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –ø—Ä–∞–≤–¥–æ–ø–æ–¥–æ–±–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã –°–ü–ü–í–†.

> [!IMPORTANT]
> –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É **¬´–ö–ª–∏–Ω–∏—á–µ—Å–∫–∏–π —Ñ–∞–∫—Ç > –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å ML¬ª**. –≠—Ç–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –±–µ–∑–æ–ø–∞—Å–Ω—ã–π —Å–ø–æ—Å–æ–± –≤–Ω–µ–¥—Ä–µ–Ω–∏—è ML –≤ –∫–∞—Ä–¥–∏–æ–ª–æ–≥–∏—é –Ω–∞ —Ç–µ–∫—É—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ü—Ä–∏ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–∏ –º–æ–¥–µ–ª–∏ –Ω–∞ –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö (v2.0) –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã Constrainted Mono-tuning –¥–ª—è –ø—Ä–∏–Ω—É–∂–¥–µ–Ω–∏—è –º–æ–¥–µ–ª–∏ –∫ –º–æ–Ω–æ—Ç–æ–Ω–Ω–æ–º—É —Ä–æ—Å—Ç—É —Ä–∏—Å–∫–∞ –æ—Ç –∫—É—Ä–µ–Ω–∏—è –∏ –∞–ª–∫–æ–≥–æ–ª—è –Ω–∞ —ç—Ç–∞–ø–µ –æ–±—É—á–µ–Ω–∏—è Boost-–±–ª–æ–∫–∞.
